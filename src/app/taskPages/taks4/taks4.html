<div class="container mt-4">
  <div class="card shadow-sm wrapper" style="background-color: #1e1e1e;">
    <div class="card-body">
      <h3 class="card-title text-center mb-4" style="color: white;">Dijkstra's Algorithm</h3>

      <div class="row mb-4">
        <div class="col-md-6">
          <h5 style="color: white;">Add Node</h5>
          <div class="input-group mb-2">
            <input type="text" class="form-control" placeholder="Node ID" [(ngModel)]="newNodeId">
            <button class="btn btn-primary" (click)="addNode()">Add Node</button>
          </div>
        </div>
        
        <div class="col-md-6">
          <h5 style="color: white;">Add Edge</h5>
          <div class="row g-2">
            <div class="col-3">
              <input type="text" class="form-control" placeholder="From" [(ngModel)]="newEdgeSource">
            </div>
            <div class="col-3">
              <input type="text" class="form-control" placeholder="To" [(ngModel)]="newEdgeTarget">
            </div>
            <div class="col-3">
              <input type="number" class="form-control" placeholder="Weight" [(ngModel)]="newEdgeWeight" min="1">
            </div>
            <div class="col-3">
              <input type="number" class="form-control" placeholder="Time" [(ngModel)]="newEdgeTime" min="1">
            </div>
            <div class="col-12">
              <button class="btn btn-success w-100" (click)="addEdge()">Add Edge</button>
            </div>
          </div>
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-md-6">
          <label class="form-label" style="color: white;">Start Node:</label>
          <select class="form-select" [(ngModel)]="startNode">
            <option *ngFor="let node of nodes" [value]="node.id">{{ node.label }}</option>
          </select>
        </div>
        <div class="col-md-6">
          <label class="form-label" style="color: white;">End Node:</label>
          <select class="form-select" [(ngModel)]="endNode">
            <option *ngFor="let node of nodes" [value]="node.id">{{ node.label }}</option>
          </select>
        </div>
      </div>

      <div class="d-flex gap-2 justify-content-center mb-4">
        <button class="btn btn-primary" (click)="shortestDijkstra()">Shortest Path (Weight)</button>
        <button class="btn btn-success" (click)="fastestDijkstra()">Fastest Path (Time)</button>
        <button class="btn btn-secondary" (click)="reset()">Reset</button>
      </div>

      <div class="alert alert-info" *ngIf="resultPath">
        <strong>Result Path:</strong> {{ resultPath }}
      </div>

      <div class="graph-container mb-4" style="height: 400px; border: 1px solid #dee2e6; border-radius: 0.375rem; overflow: auto; background: #f8f9fa;">
        <svg width="100%" height="100%">
          <g *ngFor="let edge of edges">
            <line 
              [attr.x1]="getNodeX(edge.source)" 
              [attr.y1]="getNodeY(edge.source)"
              [attr.x2]="getNodeX(edge.target)" 
              [attr.y2]="getNodeY(edge.target)"
              stroke="#888" 
              stroke-width="2"
            />
            <text 
              [attr.x]="(getNodeX(edge.source) + getNodeX(edge.target)) / 2"
              [attr.y]="(getNodeY(edge.source) + getNodeY(edge.target)) / 2 - 5"
              text-anchor="middle" 
              font-size="10"
              fill="#333"
            >
              w:{{edge.weight}} t:{{edge.time}}
            </text>
          </g>
          
          <g *ngFor="let node of nodes">
            <circle 
              [attr.cx]="node.x" 
              [attr.cy]="node.y" 
              r="20" 
              [attr.fill]="node.color"
              stroke="#333" 
              stroke-width="2"
            />
            <text 
              [attr.x]="node.x" 
              [attr.y]="node.y + 5" 
              text-anchor="middle" 
              fill="white" 
              font-size="12"
              font-weight="bold"
            >
              {{ node.label }}
            </text>
          </g>
        </svg>
      </div>

      <div *ngIf="calculationSteps.length > 0">
        <h5 style="color: white;">Calculation Steps:</h5>
        <div class="border rounded p-2 bg-light" style="max-height: 200px; overflow-y: auto;">
          <div *ngFor="let step of calculationSteps" class="small mb-1">{{ step }}</div>
        </div>
      </div>
    </div>
  </div>
</div>